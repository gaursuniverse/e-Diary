(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{32:function(e,t,a){e.exports=a(62)},37:function(e,t,a){},62:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(29),o=a.n(c),l=(a(37),a(2)),i=a.n(l),s=a(5),u=a(7),m=a(6),p=a.n(m),d=a(13),v=a(12);function f(e){var t=e.setIsLogin,a=Object(n.useState)({name:"",email:"",password:""}),c=Object(u.a)(a,2),o=c[0],l=c[1],m=Object(n.useState)(""),f=Object(u.a)(m,2),h=f[0],E=f[1],b=function(e){var t=e.target,a=t.name,n=t.value;l(Object(v.a)(Object(v.a)({},o),{},Object(d.a)({},a,n))),E("")},g=function(){var e=Object(s.a)(i.a.mark((function e(t){var a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,p.a.post("/users/register",{username:o.name,email:o.email,password:o.password});case 4:a=e.sent,l({name:"",email:"",password:""}),E(a.data.msg),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),e.t0.response.data.msg&&E(e.t0.response.data.msg);case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}(),w=function(){var e=Object(s.a)(i.a.mark((function e(a){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),e.prev=1,e.next=4,p.a.post("/users/login",{email:o.email,password:o.password});case 4:n=e.sent,l({name:"",email:"",password:""}),localStorage.setItem("tokenStore",n.data.token),t(!0),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),e.t0.response.data.msg&&E(e.t0.response.data.msg);case 13:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t){return e.apply(this,arguments)}}(),x=Object(n.useState)(!1),j=Object(u.a)(x,2),O=j[0],k=j[1],y={visibility:O?"visible":"hidden",opacity:O?1:0};return r.a.createElement("section",{className:"login-page"},r.a.createElement("div",{className:"login create-note"},r.a.createElement("h2",null,"Login"),r.a.createElement("form",{onSubmit:w},r.a.createElement("input",{type:"email",name:"email",id:"login-email",placeholder:"Email",required:!0,value:o.email,onChange:b}),r.a.createElement("input",{type:"password",name:"password",id:"login-password",placeholder:"Password",required:!0,value:o.password,autoComplete:"true",onChange:b}),r.a.createElement("button",{type:"submit"},"Login"),r.a.createElement("p",null,"You don't have an account?",r.a.createElement("span",{onClick:function(){return k(!0)}}," Register Now")),r.a.createElement("h3",null,h))),r.a.createElement("div",{className:"register create-note",style:y},r.a.createElement("h2",null,"Register"),r.a.createElement("form",{onSubmit:g},r.a.createElement("input",{type:"text",name:"name",id:"register-name",placeholder:"User Name",required:!0,value:o.name,onChange:b}),r.a.createElement("input",{type:"email",name:"email",id:"register-email",placeholder:"Email",required:!0,value:o.email,onChange:b}),r.a.createElement("input",{type:"password",name:"password",id:"register-password",placeholder:"Password",required:!0,value:o.password,autoComplete:"true",onChange:b}),r.a.createElement("button",{type:"submit"},"Register"),r.a.createElement("p",null,"You already have an account?",r.a.createElement("span",{onClick:function(){return k(!1)}}," Login Now")),r.a.createElement("h3",null,h))))}var h=a(11);function E(e){var t=e.setIsLogin;return r.a.createElement("header",null,r.a.createElement("div",{className:"logo"},r.a.createElement("h1",null,r.a.createElement(h.b,{to:"/"},"Vishku Notes"))),r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement(h.b,{to:"/"},"Home")),r.a.createElement("li",null,r.a.createElement(h.b,{to:"/create"},"Create Note")),r.a.createElement("li",{onClick:function(){localStorage.clear(),t(!1)}},r.a.createElement(h.b,{to:"/"},"Logout"))))}var b=a(31);function g(){var e=Object(n.useState)([]),t=Object(u.a)(e,2),a=t[0],c=t[1],o=Object(n.useState)(""),l=Object(u.a)(o,2),m=l[0],d=l[1],v=function(){var e=Object(s.a)(i.a.mark((function e(t){var a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.a.get("api/notes",{headers:{Authorization:t}});case 2:a=e.sent,c(a.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(n.useEffect)((function(){var e=localStorage.getItem("tokenStore");d(e),e&&v(e)}),[]);var f=function(){var e=Object(s.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!m){e.next=5;break}return e.next=4,p.a.delete("api/notes/".concat(t),{headers:{Authorization:m}});case 4:v(m);case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),window.location.href="/";case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:"note-wrapper"},a.map((function(e){return r.a.createElement("div",{className:"card",key:e._id},r.a.createElement("h4",{title:e.title},e.title),r.a.createElement("div",{className:"text-wrapper"},r.a.createElement("p",null,e.content)),r.a.createElement("p",{className:"date"},Object(b.a)(e.date)),r.a.createElement("div",{className:"card-footer"},e.name,r.a.createElement(h.b,{to:"edit/".concat(e._id)},"Edit")),r.a.createElement("button",{className:"close",onClick:function(){return f(e._id)}},"X"))})))}var w=a(1);function x(){var e=Object(n.useState)({title:"",content:"",date:""}),t=Object(u.a)(e,2),a=t[0],c=t[1],o=Object(w.e)(),l=function(e){var t=e.target,n=t.name,r=t.value;c(Object(v.a)(Object(v.a)({},a),{},Object(d.a)({},n,r)))},m=function(){var e=Object(s.a)(i.a.mark((function e(t){var n,r,c,l,s;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),e.prev=1,!(n=localStorage.getItem("tokenStore"))){e.next=9;break}return r=a.title,c=a.content,l=a.date,s={title:r,content:c,date:l},e.next=8,p.a.post("/api/notes",s,{headers:{Authorization:n}});case 8:return e.abrupt("return",o.push("/"));case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),window.location.href="/";case 14:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:"create-note"},r.a.createElement("h2",null,"Create Note"),r.a.createElement("form",{onSubmit:m,autoComplete:"off"},r.a.createElement("div",{className:"row"},r.a.createElement("label",{htmlFor:"title"},"Title"),r.a.createElement("input",{type:"text",value:a.title,id:"title",name:"title",required:!0,onChange:l})),r.a.createElement("div",{className:"row"},r.a.createElement("label",{htmlFor:"content"},"Content"),r.a.createElement("textarea",{type:"text",value:a.content,id:"content",name:"content",required:!0,rows:"10",onChange:l})),r.a.createElement("label",{htmlFor:"date"},"Date: ",a.date," "),r.a.createElement("div",{className:"row"},r.a.createElement("input",{type:"date",id:"date",name:"date",onChange:l})),r.a.createElement("button",{type:"submit"},"Save")))}function j(e){var t=e.match,a=Object(n.useState)({title:"",content:"",date:"",id:""}),c=Object(u.a)(a,2),o=c[0],l=c[1],m=Object(w.e)();Object(n.useEffect)((function(){(function(){var e=Object(s.a)(i.a.mark((function e(){var a,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=localStorage.getItem("tokenStore"),!t.params.id){e.next=6;break}return e.next=4,p.a.get("/api/notes/".concat(t.params.id),{headers:{Authorization:a}});case 4:n=e.sent,l({title:n.data.title,content:n.data.content,date:new Date(n.data.date).toLocaleDateString(),id:n.data._id});case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[t.params.id]);var f=function(e){var t=e.target,a=t.name,n=t.value;l(Object(v.a)(Object(v.a)({},o),{},Object(d.a)({},a,n)))},h=function(){var e=Object(s.a)(i.a.mark((function e(t){var a,n,r,c,l,s;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),e.prev=1,!(a=localStorage.getItem("tokenStore"))){e.next=9;break}return n=o.title,r=o.content,c=o.date,l=o.id,s={title:n,content:r,date:c},e.next=8,p.a.put("/api/notes/".concat(l),s,{headers:{Authorization:a}});case 8:return e.abrupt("return",m.push("/"));case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),window.location.href="/";case 14:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:"create-note"},r.a.createElement("h2",null,"Edit Note"),r.a.createElement("form",{onSubmit:h,autoComplete:"off"},r.a.createElement("div",{className:"row"},r.a.createElement("label",{htmlFor:"title"},"Title"),r.a.createElement("input",{type:"text",value:o.title,id:"title",name:"title",required:!0,onChange:f})),r.a.createElement("div",{className:"row"},r.a.createElement("label",{htmlFor:"content"},"Content"),r.a.createElement("textarea",{type:"text",value:o.content,id:"content",name:"content",required:!0,rows:"10",onChange:f})),r.a.createElement("label",{htmlFor:"date"},"Date: ",o.date," "),r.a.createElement("div",{className:"row"},r.a.createElement("input",{type:"date",id:"date",name:"date",onChange:f})),r.a.createElement("button",{type:"submit"},"Save")))}function O(e){var t=e.setIsLogin;return r.a.createElement(h.a,null,r.a.createElement("div",{className:"notes-page"},r.a.createElement(E,{setIsLogin:t}),r.a.createElement("section",null,r.a.createElement(w.a,{path:"/",component:g,exact:!0}),r.a.createElement(w.a,{path:"/create",component:x,exact:!0}),r.a.createElement(w.a,{path:"/edit/:id",component:j,exact:!0}))))}var k=function(){var e=Object(n.useState)(!1),t=Object(u.a)(e,2),a=t[0],c=t[1];return Object(n.useEffect)((function(){(function(){var e=Object(s.a)(i.a.mark((function e(){var t,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=localStorage.getItem("tokenStore"))){e.next=11;break}return e.next=4,p.a.get("/users/verify",{headers:{Authorization:t}});case 4:if(a=e.sent,console.log(a),c(a.data),!1!==a.data){e.next=9;break}return e.abrupt("return",localStorage.clear());case 9:e.next=12;break;case 11:c(!1);case 12:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]),r.a.createElement("div",{className:"App"},a?r.a.createElement(O,{setIsLogin:c}):r.a.createElement(f,{setIsLogin:c}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(k,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[32,1,2]]]);
//# sourceMappingURL=main.179d60ab.chunk.js.map